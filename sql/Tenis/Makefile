# Makefile para gestionar bases de datos SQL de ex√°menes IISSI-1
# Uso: make [target]

.PHONY: help load-a load-b load-c load-d load-e load-f load-all test-a test-b test-c test-d test-e test-f test-all sql-all

# Variables
# Colores para output
GREEN := \033[0;32m
YELLOW := \033[1;33m
NC := \033[0m # No Color

# Target por defecto
help:
	@echo "$(GREEN)üóÑÔ∏è  Makefile para Bases de Datos SQL - Ex√°menes IISSI-1$(NC)"
	@echo ""
	@echo "Targets disponibles:"
	@echo "  $(YELLOW)make load-a$(NC)       - Carga la BD del modelo A"
	@echo "  $(YELLOW)make test-a$(NC)       - Ejecuta tests del modelo A"
	@echo "  $(YELLOW)make load-all$(NC)     - Carga todas las BDs (A-F)"
	@echo "  $(YELLOW)make test-all$(NC)     - Ejecuta tests de todos los modelos"
	@echo "  $(YELLOW)make sql-all$(NC)      - Carga y prueba todos los modelos"
	@echo ""

# Cargar base de datos para modelo espec√≠fico
load-a:
	@echo "$(GREEN)üìä Cargando Modelo A...$(NC)"
	@mariadb < loadDB-a.sql
	@echo "‚úÖ Modelo A cargado"

load-b:
	@echo "$(GREEN)üìä Cargando Modelo B...$(NC)"
	@mariadb < loadDB-b.sql
	@echo "‚úÖ Modelo B cargado"

load-c:
	@echo "$(GREEN)üìä Cargando Modelo C...$(NC)"
	@mariadb < loadDB-c.sql
	@echo "‚úÖ Modelo C cargado"

load-d:
	@echo "$(GREEN)üìä Cargando Modelo D...$(NC)"
	@mariadb < loadDB-d.sql
	@echo "‚úÖ Modelo D cargado"

load-e:
	@echo "$(GREEN)üìä Cargando Modelo E...$(NC)"
	@mariadb < loadDB-e.sql
	@echo "‚úÖ Modelo E cargado"

load-f:
	@echo "$(GREEN)üìä Cargando Modelo F...$(NC)"
	@mariadb < loadDB-f.sql
	@echo "‚úÖ Modelo F cargado"

# Ejecutar tests para modelo espec√≠fico
test-a:
	@echo "$(GREEN)üß™ Ejecutando tests Modelo A...$(NC)"
	@mariadb -e "USE Tenis_A_DB; CALL p_run_all_tests();"

test-b:
	@echo "$(GREEN)üß™ Ejecutando tests Modelo B...$(NC)"
	@mariadb -e "USE Tenis_B_DB; CALL p_run_all_tests();"

test-c:
	@echo "$(GREEN)üß™ Ejecutando tests Modelo C...$(NC)"
	@mariadb -e "USE Tenis_C_DB; CALL p_run_all_tests();"

test-d:
	@echo "$(GREEN)üß™ Ejecutando tests Modelo D...$(NC)"
	@mariadb -e "USE Tenis_D_DB; CALL p_run_all_tests();"

test-e:
	@echo "$(GREEN)üß™ Ejecutando tests Modelo E...$(NC)"
	@mariadb -e "USE Tenis_E_DB; CALL p_run_all_tests();"

test-f:
	@echo "$(GREEN)üß™ Ejecutando tests Modelo F...$(NC)"
	@mariadb -e "USE Tenis_F_DB; CALL p_run_all_tests();"

# Cargar todas las bases de datos
load-all: load-a load-b load-c load-d load-e load-f
	@echo "$(GREEN)‚úÖ Todas las bases de datos cargadas$(NC)"

# Ejecutar todos los tests
test-all: test-a test-b test-c test-d test-e test-f
	@echo "$(GREEN)‚úÖ Todos los tests ejecutados$(NC)"

# Cargar y probar todo
sql-all: load-all test-all